webpackJsonp([14],{256:function(n,t,e){"use strict";function l(n){return o._22(0,[(n()(),o.Z(0,0,null,null,6,"button",[["class","item item-block"],["ion-item",""]],null,[[null,"click"]],function(n,t,e){var l=!0;if("click"===t){l=!1!==n.component.selectAmount(n.context.$implicit)&&l}return l},v.b,v.a)),o.Y(1,1097728,null,3,k.a,[O.a,w.a,o.j,o.z,[2,A.a]],null,null),o._18(335544320,2,{contentLabel:0}),o._18(603979776,3,{_buttons:1}),o._18(603979776,4,{_icons:1}),o.Y(5,16384,null,0,F.a,[],null,null),(n()(),o._20(6,2,["\n      ","\n    "]))],null,function(n,t){n(t,6,0,t.context.$implicit.display)})}function a(n){return o._22(0,[(n()(),o._20(-1,null,["\n"])),(n()(),o.Z(1,0,null,null,20,"ion-header",[],null,null,null,null,null)),o.Y(2,16384,null,0,Y.a,[w.a,o.j,o.z,[2,x.a]],null,null),(n()(),o._20(-1,null,["\n\n  "])),(n()(),o.Z(4,0,null,null,16,"ion-navbar",[["class","toolbar"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,S.b,S.a)),o.Y(5,49152,null,0,T.a,[E.a,[2,x.a],[2,I.a],w.a,o.j,o.z],null,null),(n()(),o._20(-1,3,["\n    "])),(n()(),o.Z(7,0,null,0,8,"button",[["color","hamburgermenu"],["ion-button",""],["menuToggle",""]],[[8,"hidden",0]],[[null,"click"]],function(n,t,e){var l=!0;if("click"===t){l=!1!==o._11(n,9).toggle()&&l}return l},R.b,R.a)),o.Y(8,1097728,[[1,4]],0,Z.a,[[8,""],w.a,o.j,o.z],{color:[0,"color"]},null),o.Y(9,1064960,null,0,B.a,[z.a,[2,x.a],[2,Z.a],[2,T.a]],{menuToggle:[0,"menuToggle"]},null),o.Y(10,16384,null,1,P.a,[w.a,o.j,o.z,[2,q.a],[2,T.a]],{color:[0,"color"]},null),o._18(603979776,1,{_buttons:1}),(n()(),o._20(-1,0,["\n      "])),(n()(),o.Z(13,0,null,0,1,"ion-icon",[["name","menu"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o.Y(14,147456,null,0,K.a,[w.a,o.j,o.z],{name:[0,"name"]},null),(n()(),o._20(-1,0,["\n    "])),(n()(),o._20(-1,3,["\n    "])),(n()(),o.Z(17,0,null,3,2,"ion-title",[],null,null,null,N.b,N.a)),o.Y(18,49152,null,0,$.a,[w.a,o.j,o.z,[2,q.a],[2,T.a]],null,null),(n()(),o._20(-1,0,["Communication Funds"])),(n()(),o._20(-1,3,["\n  "])),(n()(),o._20(-1,null,["\n\n"])),(n()(),o._20(-1,null,["\n\n\n"])),(n()(),o.Z(23,0,null,null,15,"ion-content",[["padding",""]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,D.b,D.a)),o.Y(24,4374528,null,0,L.a,[w.a,U.a,W.a,o.j,o.z,E.a,H.a,o.u,[2,x.a],[2,I.a]],null,null),(n()(),o._20(-1,1,["\n\n      "])),(n()(),o.Z(26,0,null,1,1,"p",[],null,null,null,null,null)),(n()(),o._20(27,null,["Select the amount of funds you would like to add to your communications account. Your current account balance\n        is\n        $","."])),(n()(),o._20(-1,1,["\n      "])),(n()(),o.Z(29,0,null,1,1,"p",[],null,null,null,null,null)),(n()(),o._20(30,null,["An additional $"," fee will be added at checkout.\n      "])),(n()(),o._20(-1,1,["\n\n  "])),(n()(),o.Z(32,0,null,1,5,"ion-list",[],null,null,null,null,null)),o.Y(33,16384,null,0,M.a,[w.a,o.j,o.z,U.a,G.l,W.a],null,null),(n()(),o._20(-1,null,["\n    "])),(n()(),o.U(16777216,null,null,1,null,l)),o.Y(36,802816,null,0,J.j,[o.I,o.F,o.p],{ngForOf:[0,"ngForOf"]},null),(n()(),o._20(-1,null,["\n  "])),(n()(),o._20(-1,1,["\n\n"]))],function(n,t){var e=t.component;n(t,8,0,"hamburgermenu");n(t,9,0,"");n(t,10,0,"hamburgermenu");n(t,14,0,"menu");n(t,36,0,e.displayAmounts)},function(n,t){var e=t.component;n(t,4,0,o._11(t,5)._hidden,o._11(t,5)._sbPadding);n(t,7,0,o._11(t,9).isHidden);n(t,13,0,o._11(t,14)._hidden);n(t,23,0,o._11(t,24).statusbarPadding,o._11(t,24)._hasRefresher);n(t,27,0,e.accountBalance);n(t,30,0,e.fee)})}Object.defineProperty(t,"__esModule",{value:!0});var o=e(0),u=(e(3),e(57),e(59),e(47)),r=e(134),s=e(276),i=this&&this.__awaiter||function(n,t,e,l){return new(e||(e=Promise))(function(a,o){function u(n){try{s(l.next(n))}catch(n){o(n)}}function r(n){try{s(l.throw(n))}catch(n){o(n)}}function s(n){n.done?a(n.value):new e(function(t){t(n.value)}).then(u,r)}s((l=l.apply(n,t||[])).next())})},c=this&&this.__generator||function(n,t){function e(e){return function(u){return function(e){if(l)throw new TypeError("Generator is already executing.");for(;r;)try{if(l=1,a&&(o=a[2&e[0]?"return":e[0]?"throw":"next"])&&!(o=o.call(a,e[1])).done)return o;switch(a=0,o&&(e=[0,o.value]),e[0]){case 0:case 1:o=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++,a=e[1],e=[0];continue;case 7:e=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(6===e[0]||2===e[0])){r=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){r.label=e[1];break}if(6===e[0]&&r.label<o[1]){r.label=o[1],o=e;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(e);break}o[2]&&r.ops.pop(),r.trys.pop();continue}e=t.call(n,r)}catch(n){e=[6,n],a=0}finally{l=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,u])}}var l,a,o,u,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u},d=function(){function n(n,t,e,l,a,o,u,r,s){this.navCtrl=n,this.navParams=t,this.api=e,this.storage=l,this.loadingCtrl=a,this.alertCtrl=o,this.commaccount=u,this.iab=r,this.plt=s}return n.prototype.ionViewCanEnter=function(){return i(this,void 0,void 0,function(){var n,t,e,l,a,o,u,r;return c(this,function(s){switch(s.label){case 0:return(n=this.loadingCtrl.create({content:"Loading..."})).present(),t=this,[4,this.storage.get("inmate")];case 1:return t.inmate=s.sent(),e=this,[4,this.storage.get("location")];case 2:return e.siteID=s.sent(),l=this,[4,this.storage.get("webuserid")];case 3:return l.user=s.sent(),[4,this.commaccount.GetUserWebBalance(this.user)];case 4:return a=s.sent(),o=this,[4,a.getWebuserAccountBalanceResult.toFixed(2)];case 5:return o.accountBalance=s.sent(),[4,this.api.getCreditCardFee(this.siteID)];case 6:return u=s.sent(),[4,this.checkFee(u)];case 7:return s.sent(),[4,this.storage.get("depositAmount")];case 8:return r=s.sent(),[4,this.handleDepositAmounts(r)];case 9:return s.sent(),n.dismiss(),[2]}})})},n.prototype.handleDepositAmounts=function(n){for(var t=[],e=n.split(","),l=0;l<e.length;l++)t.unshift({display:"$"+e[l]+".00",amount:e[l]}),this.displayAmounts=t},n.prototype.checkFee=function(n){var t=this;if(1==n.CreditCardFeeResultResult.IsSuccess)this.fee=Number(n.CreditCardFeeResultResult.Fee);else if(0==n.IsSuccess){this.alertCtrl.create({title:"Fee Error",cssClass:"alertCustomClass",message:"Error getting credit card deposit fee. Please try again later.",buttons:[{text:"Okay",cssClass:"alertCustomClass3",handler:function(){t.navCtrl.setRoot("HomePage")}}]}).present()}},n.prototype.selectAmount=function(n){return i(this,void 0,void 0,function(){var t,e=this;return c(this,function(l){switch(l.label){case 0:return[4,+n.amount];case 1:return t=l.sent(),[4,this.alertCtrl.create({title:"Confirm funds",message:"You have selected $"+t+" to add to your communications account. Click okay to continue to checkout.",cssClass:"alertCustomClass",buttons:[{text:"No, thanks",cssClass:"alertCustomClass2",handler:function(){t=0}},{text:"Okay",cssClass:"alertCustomClass3",handler:function(){var n={Type:0,Amount:t,Qty:1};return e.api.TKCEreborCommTransaction(JSON.stringify(n),t).then(function(n){if(1==n.TKCEreborCommTransactionResult.IsSuccess){if(e.plt.is("ios"))window.cordova.InAppBrowser.open(n.TKCEreborCommTransactionResult.BollettaRedirectUrl,"_blank",{location:"no"});else if(e.plt.is("android"))e.iab.create(n.TKCEreborCommTransactionResult.BollettaRedirectUrl,"_self",{location:"no"})}else 0==n.TKCEreborCommTransactionResult.IsSuccess&&e.throwErrorAlert(n.TKCEreborCommTransactionResult.ErrorMessage)})}}]})];case 2:return l.sent().present(),[2]}})})},n.prototype.throwErrorAlert=function(n){var t=this;this.alertCtrl.create({title:"Error with transaction",cssClass:"alertCustomClass",message:n,buttons:[{text:"Okay",cssClass:"alertCustomClass3",handler:function(){t.navCtrl.setRoot("HomePage")}}]}).present()},n}(),p=function(){return function(){}}(),b=e(200),_=e(201),m=e(202),f=e(203),h=e(204),g=e(205),y=e(206),C=e(207),j=e(208),v=e(130),k=e(16),O=e(14),w=e(1),A=e(40),F=e(60),Y=e(84),x=e(5),S=e(275),T=e(34),E=e(8),I=e(20),R=e(46),Z=e(19),B=e(128),z=e(22),P=e(129),q=e(35),K=e(38),N=e(210),$=e(58),D=e(209),L=e(21),U=e(4),W=e(9),H=e(24),M=e(48),G=e(6),J=e(11),V=e(10),X=e(127),Q=e(85),nn=e(86),tn=o.X({encapsulation:2,styles:[],data:{}}),en=o.V("page-communication-funds",d,function(n){return o._22(0,[(n()(),o.Z(0,0,null,null,1,"page-communication-funds",[],null,null,null,a,tn)),o.Y(1,49152,null,0,d,[I.a,V.a,u.a,X.b,Q.a,nn.a,r.a,s.a,U.a],null,null)],null,null)},{},{},[]),ln=e(18),an=e(126),on=e(39);e.d(t,"CommunicationFundsPageModuleNgFactory",function(){return un});var un=o.W(p,[],function(n){return o._7([o._8(512,o.i,o.S,[[8,[b.a,_.a,m.a,f.a,h.a,g.a,y.a,C.a,j.a,en]],[3,o.i],o.s]),o._8(4608,J.m,J.l,[o.r,[2,J.u]]),o._8(4608,ln.s,ln.s,[]),o._8(4608,ln.d,ln.d,[]),o._8(4608,s.a,s.a,[]),o._8(512,J.b,J.b,[]),o._8(512,ln.q,ln.q,[]),o._8(512,ln.i,ln.i,[]),o._8(512,ln.o,ln.o,[]),o._8(512,an.a,an.a,[]),o._8(512,an.b,an.b,[]),o._8(512,p,p,[]),o._8(256,on.a,d,[])])})},275:function(n,t,e){"use strict";function l(n){return a._22(0,[(n()(),a.Z(0,0,null,null,1,"div",[["class","toolbar-background"]],null,null,null,null,null)),a.Y(1,278528,null,0,o.i,[a.p,a.q,a.j,a.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(n()(),a.Z(2,0,null,null,8,"button",[["class","back-button"],["ion-button","bar-button"]],[[8,"hidden",0]],[[null,"click"]],function(n,t,e){var l=!0;if("click"===t){l=!1!==n.component.backButtonClick(e)&&l}return l},u.b,u.a)),a.Y(3,278528,null,0,o.i,[a.p,a.q,a.j,a.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),a.Y(4,1097728,null,0,r.a,[[8,"bar-button"],s.a,a.j,a.z],null,null),(n()(),a.Z(5,0,null,0,2,"ion-icon",[["class","back-button-icon"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a.Y(6,278528,null,0,o.i,[a.p,a.q,a.j,a.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),a.Y(7,147456,null,0,i.a,[s.a,a.j,a.z],{name:[0,"name"]},null),(n()(),a.Z(8,0,null,0,2,"span",[["class","back-button-text"]],null,null,null,null,null)),a.Y(9,278528,null,0,o.i,[a.p,a.q,a.j,a.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(n()(),a._20(10,null,["",""])),a._10(null,0),a._10(null,1),a._10(null,2),(n()(),a.Z(14,0,null,null,2,"div",[["class","toolbar-content"]],null,null,null,null,null)),a.Y(15,278528,null,0,o.i,[a.p,a.q,a.j,a.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),a._10(null,3)],function(n,t){var e=t.component;n(t,1,0,"toolbar-background","toolbar-background-"+e._mode);n(t,3,0,"back-button","back-button-"+e._mode);n(t,6,0,"back-button-icon","back-button-icon-"+e._mode);n(t,7,0,e._bbIcon);n(t,9,0,"back-button-text","back-button-text-"+e._mode);n(t,15,0,"toolbar-content","toolbar-content-"+e._mode)},function(n,t){var e=t.component;n(t,2,0,e._hideBb);n(t,5,0,a._11(t,7)._hidden);n(t,10,0,e._backText)})}e.d(t,"a",function(){return c}),t.b=l;var a=e(0),o=e(11),u=e(46),r=e(19),s=e(1),i=e(38),c=(e(5),e(20),a.X({encapsulation:2,styles:[],data:{}}))},276:function(n,t,e){"use strict";e.d(t,"a",function(){return r});var l=e(3),a=e(61),o=e(12),u=(e.n(o),function(){function n(n,t,e){try{e&&"string"!=typeof e&&(e=Object.keys(e).map(function(n){return n+"="+e[n]}).join(",")),this._objectInstance=cordova.InAppBrowser.open(n,t,e)}catch(e){window.open(n,t),console.warn("Native: InAppBrowser is not installed or you are running on a browser. Falling back to window.open.")}}return n.prototype.show=function(){},n.prototype.close=function(){},n.prototype.hide=function(){},n.prototype.executeScript=function(n){},n.prototype.insertCSS=function(n){},n.prototype.on=function(n){var t=this;return new o.Observable(function(e){return t._objectInstance.addEventListener(n,e.next.bind(e)),function(){return t._objectInstance.removeEventListener(n,e.next.bind(e))}})},Object(l.__decorate)([Object(a.c)({sync:!0}),Object(l.__metadata)("design:type",Function),Object(l.__metadata)("design:paramtypes",[]),Object(l.__metadata)("design:returntype",void 0)],n.prototype,"show",null),Object(l.__decorate)([Object(a.c)({sync:!0}),Object(l.__metadata)("design:type",Function),Object(l.__metadata)("design:paramtypes",[]),Object(l.__metadata)("design:returntype",void 0)],n.prototype,"close",null),Object(l.__decorate)([Object(a.c)({sync:!0}),Object(l.__metadata)("design:type",Function),Object(l.__metadata)("design:paramtypes",[]),Object(l.__metadata)("design:returntype",void 0)],n.prototype,"hide",null),Object(l.__decorate)([Object(a.c)(),Object(l.__metadata)("design:type",Function),Object(l.__metadata)("design:paramtypes",[Object]),Object(l.__metadata)("design:returntype",Promise)],n.prototype,"executeScript",null),Object(l.__decorate)([Object(a.c)(),Object(l.__metadata)("design:type",Function),Object(l.__metadata)("design:paramtypes",[Object]),Object(l.__metadata)("design:returntype",Promise)],n.prototype,"insertCSS",null),Object(l.__decorate)([Object(a.e)(),Object(l.__metadata)("design:type",Function),Object(l.__metadata)("design:paramtypes",[String]),Object(l.__metadata)("design:returntype",o.Observable)],n.prototype,"on",null),n}()),r=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Object(l.__extends)(t,n),t.prototype.create=function(n,t,e){return new u(n,t,e)},t=Object(l.__decorate)([Object(a.g)({pluginName:"InAppBrowser",plugin:"cordova-plugin-inappbrowser",pluginRef:"cordova.InAppBrowser",repo:"https://github.com/apache/cordova-plugin-inappbrowser",platforms:["AmazonFire OS","Android","Browser","iOS","macOS","Windows"]})],t)}(a.f)}});